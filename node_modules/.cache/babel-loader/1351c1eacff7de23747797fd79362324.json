{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\tilak\\\\OneDrive\\\\Documents\\\\GitHub\\\\pwa-for-rde-test\\\\src\\\\components\\\\WatchTracker.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport useInterval from \"../hooks/useInterval\";\nimport StartStopButton from \"./StartStopButton\";\nimport Timer from \"react-compound-timer\";\nimport Sound from \"react-sound\";\nimport startSound from \"../sounds/start.mp3\";\nimport stopSound from \"../sounds/stop.mp3\";\nimport failSound from \"../sounds/failSoftShort.mp3\";\nimport passSound from \"../sounds/pass.mp3\";\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport { makeStyles } from '@material-ui/core/styles'; // import { createMuiTheme } from '@material-ui/core/styles';\n\nimport MyModal from './MyModal'; // import { ReactComponent as Ruler } from '../assets/ruler.svg';\n\nimport { ReactComponent as Percent } from \"@svgr/webpack?-svgo,+titleProp,+ref!../assets/percent.svg\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex',\n    flexGrow: 1,\n    flexDirection: 'column',\n    flexWrap: 'wrap',\n    alignContent: 'center',\n    alignItems: 'center',\n    // padding: '0 5em',\n    textAlign: 'center',\n    maxWidth: 444,\n    marginLeft: 'auto',\n    marginRight: 'auto'\n  },\n  gridItem: {\n    padding: '5px !important'\n  },\n  insideGridItem: {\n    boxShadow: '0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)',\n    backgroundColor: '#2c384e',\n    margin: 0.1,\n    padding: '12px !important',\n    fontSize: 'large'\n  },\n  grid: {\n    padding: '1em'\n  },\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center'\n  }\n}));\n\nconst haversine = require('haversine');\n\nfunction WatchTracker() {\n  _s();\n\n  // Sounds\n  const [startPlaying, setStartPlaying] = useState(false);\n  const [stopPlaying, setStopPlaying] = useState(false);\n  const [passPlaying, setPassPlaying] = useState(false);\n  const [failPlaying, setFailPlaying] = useState(false);\n  let id, options; // BCs\n\n  let dataRate = 500; //[ms]\n\n  let urbanMax = 33;\n  let ruralMax = 55;\n  let motorwayMax = 80;\n  let uMaxShare = 50; //[%]\n\n  let uMinShare = 5;\n  let rMaxShare = 40;\n  let rMinShare = 5;\n  let mMaxShare = 40;\n  let mMinShare = 5;\n  let urmMinDist = 0.2; //[km]\n\n  let maxAltChange = 100; //[m]\n\n  let maxTestTime = 15; //[min]\n\n  let minTestTime = 6; //[min]\n\n  const [minTimeReached, setMinTimeReached] = useState(false);\n  const [maxTimeReached, setMaxTimeReached] = useState(false);\n  let idleTime = 200; //[s]\n\n  const [idleIndex, setIdleIndex] = useState(0); //[s]\n\n  let coldStartEnd = 1; //[min]\n\n  const [isColdStart, setIsColdStart] = useState(true); // Data\n\n  const [coordinates, setCoordinates] = useState([0, 0, 0, 0, 0, 0, 0]);\n  const [latitude, setLatitude] = useState(0);\n  const [longitude, setLongitude] = useState(0);\n  const [accuracy, setAccuracy] = useState(0);\n  const [gpsSpeed, setGpsSpeed] = useState(0);\n  const [altitude, setAltitude] = useState(0);\n  const [timestamp, setTimestamp] = useState(0);\n  const [startAlt, setStartAlt] = useState(0);\n  const [endAlt, setEndAlt] = useState(0);\n  const [distance, setDistance] = useState(0);\n  const [speed, setSpeed] = useState(0);\n  const [urbanDist, setUrbanDist] = useState(0);\n  const [ruralDist, setRuralDist] = useState(0);\n  const [motorwayDist, setMotorwayDist] = useState(0);\n  const [urbanShare, setUrbanShare] = useState(0);\n  const [ruralShare, setRuralShare] = useState(0);\n  const [motorwayShare, setMotorwayShare] = useState(0); // Phases \n  // const [phase, setPhase] = useState(\"Pre-Test\");\n\n  const [testStatus, setTestStatus] = useState(0); // 0 = PRE-TEST\n  // 1 = IN PROGRESS\n  // 2 = PASS\n  // 3 = FAIL \n\n  const errorStatus = [\"MAX IDLING TIME!\", \"MAX SPEED!\", \"HIGH TIME!\", \"LOW TIME!\", \"U MIN DISTANCE!\", \"R MIN DISTANCE!\", \"M MIN DISTANCE!\", \"U MIN SHARE!\", \"R MIN SHARE!\", \"M MIN SHARE!\", \"U MAX SHARE!\", \"R MAX SHARE!\", \"M MAX SHARE!\", \"MAX ALTITUDE!\"]; // Failure Switches\n\n  const [error4, setError4] = useState(false);\n  const [error5, setError5] = useState(false);\n  const [error6, setError6] = useState(false);\n  const [error7, setError7] = useState(false);\n  const [error8, setError8] = useState(false);\n  const [error9, setError9] = useState(false);\n  const [error10, setError10] = useState(false);\n  const [error11, setError11] = useState(false);\n  const [error12, setError12] = useState(false);\n  const [error13, setError13] = useState(false);\n  const [error14, setError14] = useState(false);\n  const [error15, setError15] = useState(false);\n  const [error16, setError16] = useState(false);\n  const [error17, setError17] = useState(false); // Indexes and Switches\n\n  const [index, setIndex] = useState(0);\n  const [isOn, setIsOn] = useState(false);\n\n  function success(pos) {\n    setLatitude(pos.coords.latitude);\n    setLongitude(pos.coords.longitude);\n    setAccuracy(pos.coords.accuracy);\n    setGpsSpeed(pos.coords.speed);\n    setAltitude(pos.coords.altitude);\n    setTimestamp(pos.timestamp);\n  }\n\n  useInterval(() => {\n    setGpsSpeed(gpsSpeed === null ? 0 : gpsSpeed); // set to 0 to mask null value\n\n    setCoordinates(coordinates.concat(...[latitude, longitude, altitude, speed, gpsSpeed, timestamp, accuracy]));\n    console.log(JSON.stringify(coordinates));\n    localStorage.setItem(\"coordinates\", JSON.stringify(coordinates)); // log lats and longs (new):\n    // console.log(\"🔃 \" + latitude)\n    // console.log(\"🔁 \" + longitude)\n\n    let end = {\n      latitude: latitude,\n      longitude: longitude\n    };\n    let oldLat = coordinates[index];\n    let oldLng = coordinates[index + 1];\n    setIndex(i => i + 7);\n    let start = {\n      latitude: oldLat,\n      longitude: oldLng\n    }; // log lats and longs (old):\n    // console.log(\"🔃old \" + start.latitude)\n    // console.log(\"🔁old \" + start.longitude)\n\n    let havDis = haversine(start, end, {\n      unit: 'km'\n    });\n\n    if (start.latitude === 0 && start.longitude === 0) {\n      return;\n    }\n\n    setDistance(prev => prev + havDis); // log cumulative distance:\n    // console.log(\"💨 \" + distance);\n\n    let startTime = coordinates[index - 2];\n    let endTime = timestamp;\n    let deltaT = (endTime - startTime) / 3.6e+6; // ms -> hr;\n\n    deltaT = deltaT === 0 ? 1 : deltaT; // set to 1 to mask NaN error\n    // console.log(\"⏳ \" + deltaT)\n\n    if (havDis > 0) {\n      setSpeed(havDis / deltaT);\n    }\n\n    ;\n\n    if (speed >= 0 && speed < 1 && start.latitude === 0 && start.longitude === 0) {\n      setIdleIndex(prev => (prev + 2 * (dataRate / 1000)).toFixed(2)); // stopwatch count in [s]\n    } else if (speed >= 0 && speed < 1) {\n      setIdleIndex(prev => (prev + dataRate / 1000).toFixed(2));\n    } else if (speed > 1) {\n      setIdleIndex(0.0.toFixed(2));\n    } // if (speed === 0 && isOn === false) {\n    //   setPhase(\"Pre-Test\")\n    // } else if (isColdStart === true) {\n    //   setPhase(\"Cold Start\")\n    // } else if (speed < urbanMax) {\n    //   setPhase(\"U\");\n    // } else if (speed < ruralMax) {\n    //   setPhase(\"R\");\n    // } else if (speed < motorwayMax) {\n    //   setPhase(\"M\")\n    // } else {\n    //   setPhase(\"EXTREME\")\n    // }\n\n\n    if (speed < urbanMax && speed > 0) {\n      setUrbanDist(prev => prev + havDis);\n    }\n\n    if (speed < ruralMax && speed > urbanMax) {\n      setRuralDist(prev => prev + havDis);\n    }\n\n    if (speed < motorwayMax && speed > ruralMax) {\n      setMotorwayDist(prev => prev + havDis);\n    }\n\n    setUrbanShare(distance === 0 ? 0 : urbanDist / distance * 100);\n    setRuralShare(distance === 0 ? 0 : ruralDist / distance * 100);\n    setMotorwayShare(distance === 0 ? 0 : motorwayDist / distance * 100); // BC VERIFICATION\n    // Ordered for checking priority and code efficiency\n\n    setTestStatus(1); // set to in-progress the beginning\n    // HARD FAILURES (Break on 4, 5 and 6) \n    // Time\n\n    if (idleIndex >= idleTime) {\n      setError4(errorStatus[4 - 4]);\n      setIsOn(false);\n      stopWatch();\n    } // Speed\n\n\n    if (speed > motorwayMax) {\n      setError5(errorStatus[5 - 4]);\n      setIsOn(false);\n      stopWatch();\n    } // Time\n\n\n    if (maxTimeReached) {\n      setError6(errorStatus[6 - 4]);\n      setIsOn(false);\n      stopWatch();\n    } // SOFT FAILURES\n    // Time \n\n\n    if (!minTimeReached) {\n      setError7(errorStatus[7 - 4]);\n    } else setError7(false); // Distance [km]\n\n\n    if (urbanDist < urmMinDist) {\n      setError8(errorStatus[8 - 4]);\n    } else setError8(false);\n\n    if (ruralDist < urmMinDist) {\n      setError9(errorStatus[9 - 4]);\n    } else setError9(false);\n\n    if (motorwayDist < urmMinDist) {\n      setError10(errorStatus[10 - 4]);\n    } else setError10(false); // Min Distance Share [%]\n\n\n    if (urbanShare < uMinShare) {\n      setError11(errorStatus[11 - 4]);\n    } else setError11(false);\n\n    if (ruralShare < rMinShare) {\n      setError12(errorStatus[12 - 4]);\n    } else setError12(false);\n\n    if (motorwayShare < mMinShare) {\n      setError13(errorStatus[13 - 4]);\n    } else setError13(false); // Max Distance Share [%]\n\n\n    if (urbanShare > uMaxShare) {\n      setError14(errorStatus[14 - 4]);\n    } else setError14(false);\n\n    if (ruralShare > rMaxShare) {\n      setError15(errorStatus[15 - 4]);\n    } else setError15(false);\n\n    if (motorwayShare > mMaxShare) {\n      setError16(errorStatus[16 - 4]);\n    } else setError16(false);\n  }, isOn ? dataRate : null);\n\n  function error(err) {\n    console.warn('ERROR(' + err.code + '): ' + err.message);\n  }\n\n  options = {\n    enableHighAccuracy: true,\n    maximumAge: 0\n  };\n\n  function startWatch() {\n    // console.log(\"Starting Watch.\")\n    if (\"geolocation\" in navigator && \"watchPosition\" in navigator.geolocation) {\n      id = navigator.geolocation.watchPosition(success, error, options);\n    } else {\n      console.log(\"Geolocation not available.\");\n    }\n  }\n\n  function stopWatch() {\n    // console.log(\"Stopping Watch.\");\n    navigator.geolocation.clearWatch(id);\n    setStartAlt(coordinates[2]);\n    setEndAlt(altitude);\n\n    if (Math.abs(startAlt - endAlt) > maxAltChange) {\n      setError17(errorStatus[17 - 4]);\n    }\n\n    if (error4 || error5 || error6 || error7 || error8 || error9 || error10 || error11 || error12 || error13 || error14 || error15 || error16 || error17) {\n      setTestStatus(3);\n      setFailPlaying(true);\n      return;\n    } else {\n      setTestStatus(2);\n      console.log(\"Test Passed.\");\n      setPassPlaying(true);\n    }\n  }\n\n  const classes = useStyles();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.root,\n    children: /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Sound, {\n        volume: 75,\n        playStatus: startPlaying ? Sound.status.PLAYING : Sound.status.STOPPED,\n        url: startSound,\n        onFinishedPlaying: () => setStartPlaying(!startPlaying)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Sound, {\n        volume: 75,\n        playStatus: stopPlaying ? Sound.status.PLAYING : Sound.status.STOPPED,\n        url: stopSound,\n        onFinishedPlaying: () => setStopPlaying(!stopPlaying)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Sound, {\n        volume: 75,\n        playStatus: passPlaying ? Sound.status.PLAYING : Sound.status.STOPPED,\n        url: passSound,\n        onFinishedPlaying: () => setPassPlaying(!passPlaying)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 396,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Sound, {\n        volume: 75,\n        playStatus: failPlaying ? Sound.status.PLAYING : Sound.status.STOPPED,\n        url: failSound,\n        onFinishedPlaying: () => setFailPlaying(!failPlaying)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 402,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Timer, {\n        initialTime: 0,\n        startImmediately: false,\n        lastUnit: \"m\",\n        checkpoints: [{\n          time: coldStartEnd * 60000,\n          callback: () => setIsColdStart(false)\n        }, {\n          time: maxTestTime * 60000,\n          callback: () => setMaxTimeReached(true)\n        }, {\n          time: minTestTime * 60000,\n          callback: () => setMinTimeReached(true)\n        }],\n        onStart: () => {\n          // console.log('onStart hook');\n          startWatch();\n          setIsOn(true);\n          setTestStatus(1);\n          setStartPlaying(true);\n        },\n        onStop: () => {\n          // console.log('onStop hook');\n          stopWatch();\n          setIsOn(false); // setPhase(\"Post-Test\");\n\n          setStopPlaying(true);\n        },\n        onReset: () => {\n          // console.log('onReset hook')\n          setTestStatus(0);\n          setFailPlaying(false);\n          navigator.geolocation.clearWatch(id);\n          setCoordinates([0, 0, 0, 0, 0, 0, 0]);\n          setIndex(0);\n          setIdleIndex(0);\n          setUrbanDist(0);\n          setRuralDist(0);\n          setMotorwayDist(0);\n          setUrbanShare(0);\n          setRuralShare(0);\n          setMotorwayShare(0);\n          setAccuracy(0);\n          setSpeed(0);\n          setGpsSpeed(0); // setPhase(\"Pre-Test\");\n\n          setDistance(0); // setErrorStatusDisplay([]);\n          // console.log(\"Reset.\")\n          // localStorage.setItem(\"coordinates\", JSON.stringify(coordinates));\n        },\n        children: ({\n          start,\n          resume,\n          pause,\n          stop,\n          reset,\n          timerState\n        }) => /*#__PURE__*/_jsxDEV(React.Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Grid, {\n            className: classes.grid,\n            container: true,\n            spacing: 3,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              style: {\n                width: '90%'\n              },\n              className: classes.gridItem,\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(StartStopButton, {\n                startWatch: start,\n                stopWatch: stop,\n                resetWatch: reset\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 469,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              style: {\n                width: '90%'\n              },\n              className: classes.gridItem,\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(Button, {\n                style: {\n                  width: 'inherit'\n                },\n                variant: \"contained\",\n                onClick: reset,\n                disabled: isOn,\n                children: \"Reset\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 473,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 472,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            className: classes.grid,\n            container: true,\n            spacing: 3,\n            children: [/*#__PURE__*/_jsxDEV(Grid, {\n              className: classes.gridItem,\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.insideGridItem,\n                children: [/*#__PURE__*/_jsxDEV(Timer.Minutes, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 485,\n                  columnNumber: 21\n                }, this), \" min\\xA0\", /*#__PURE__*/_jsxDEV(Timer.Seconds, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 19\n                }, this), \" sec\\xA0\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 482,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 481,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(Grid, {\n              className: classes.gridItem,\n              item: true,\n              xs: 6,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: classes.insideGridItem,\n                children: [distance === 0 ? 0 : Math.round(distance * 100) / 100, \" km\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 479,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: classes.grid,\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: [Math.round(speed * 10) / 10, \" km/h\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 511,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 6,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: [Math.round(speed / 1.609344498 * 10) / 10, \" mph\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 514,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 513,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 503,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Test Status (PASS/FAIL):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Data-Label\",\n        children: [testStatus === 3 && \"FAIL\", \" \", testStatus === 2 && \"PASS\", \" \", testStatus === 1 && \"IN PROGRESS\", \" \", testStatus === 0 && \"Pre-Test\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Idling Time (s):\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 527,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Data-Label\",\n        children: idleIndex\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 528,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 531,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"Distance Shares\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 532,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Grid, {\n        className: classes.grid,\n        container: true,\n        spacing: 3,\n        children: [/*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: \"_\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 539,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 538,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: \"U\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 542,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 541,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: \"R\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 544,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: \"M\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 548,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 547,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: \"km\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 553,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 552,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            style: {\n              fontSize: 'large'\n            },\n            children: Math.round(urbanDist * 1000) / 1000\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            style: {\n              fontSize: 'large'\n            },\n            children: Math.round(ruralDist * 1000) / 1000\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 562,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 561,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            style: {\n              fontSize: 'large'\n            },\n            children: Math.round(motorwayDist * 1000) / 1000\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 565,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: /*#__PURE__*/_jsxDEV(Percent, {\n              fill: \"#fafafa\",\n              width: \"1rem\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 583,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 582,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: Math.round(urbanShare)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 588,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: Math.round(ruralShare)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 591,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 590,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          className: classes.gridItem,\n          item: true,\n          xs: 3,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: classes.insideGridItem,\n            children: Math.round(motorwayShare)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 594,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 593,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 533,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Data-Small\",\n        children: isColdStart && isOn ? \"Cold Start\" : null\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 599,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 600,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 601,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(MyModal, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 382,\n    columnNumber: 5\n  }, this);\n}\n\n_s(WatchTracker, \"IBVXMfPs83iYeZIISUbBc9crezI=\", false, function () {\n  return [useInterval, useStyles];\n});\n\n_c = WatchTracker;\nexport default WatchTracker;\n\nvar _c;\n\n$RefreshReg$(_c, \"WatchTracker\");","map":{"version":3,"sources":["C:/Users/tilak/OneDrive/Documents/GitHub/pwa-for-rde-test/src/components/WatchTracker.js"],"names":["React","useState","useInterval","StartStopButton","Timer","Sound","startSound","stopSound","failSound","passSound","Grid","Button","makeStyles","MyModal","useStyles","theme","root","display","flexGrow","flexDirection","flexWrap","alignContent","alignItems","textAlign","maxWidth","marginLeft","marginRight","gridItem","padding","insideGridItem","boxShadow","backgroundColor","margin","fontSize","grid","modal","justifyContent","haversine","require","WatchTracker","startPlaying","setStartPlaying","stopPlaying","setStopPlaying","passPlaying","setPassPlaying","failPlaying","setFailPlaying","id","options","dataRate","urbanMax","ruralMax","motorwayMax","uMaxShare","uMinShare","rMaxShare","rMinShare","mMaxShare","mMinShare","urmMinDist","maxAltChange","maxTestTime","minTestTime","minTimeReached","setMinTimeReached","maxTimeReached","setMaxTimeReached","idleTime","idleIndex","setIdleIndex","coldStartEnd","isColdStart","setIsColdStart","coordinates","setCoordinates","latitude","setLatitude","longitude","setLongitude","accuracy","setAccuracy","gpsSpeed","setGpsSpeed","altitude","setAltitude","timestamp","setTimestamp","startAlt","setStartAlt","endAlt","setEndAlt","distance","setDistance","speed","setSpeed","urbanDist","setUrbanDist","ruralDist","setRuralDist","motorwayDist","setMotorwayDist","urbanShare","setUrbanShare","ruralShare","setRuralShare","motorwayShare","setMotorwayShare","testStatus","setTestStatus","errorStatus","error4","setError4","error5","setError5","error6","setError6","error7","setError7","error8","setError8","error9","setError9","error10","setError10","error11","setError11","error12","setError12","error13","setError13","error14","setError14","error15","setError15","error16","setError16","error17","setError17","index","setIndex","isOn","setIsOn","success","pos","coords","concat","console","log","JSON","stringify","localStorage","setItem","end","oldLat","oldLng","i","start","havDis","unit","prev","startTime","endTime","deltaT","toFixed","stopWatch","error","err","warn","code","message","enableHighAccuracy","maximumAge","startWatch","navigator","geolocation","watchPosition","clearWatch","Math","abs","classes","status","PLAYING","STOPPED","time","callback","resume","pause","stop","reset","timerState","width","round"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport useInterval from \"../hooks/useInterval\";\r\nimport StartStopButton from \"./StartStopButton\";\r\nimport Timer from \"react-compound-timer\";\r\n\r\nimport Sound from \"react-sound\";\r\nimport startSound from \"../sounds/start.mp3\"\r\nimport stopSound from \"../sounds/stop.mp3\"\r\nimport failSound from \"../sounds/failSoftShort.mp3\"\r\nimport passSound from \"../sounds/pass.mp3\"\r\n\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Button from '@material-ui/core/Button';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\n// import { createMuiTheme } from '@material-ui/core/styles';\r\nimport MyModal from './MyModal'\r\n\r\n// import { ReactComponent as Ruler } from '../assets/ruler.svg';\r\nimport { ReactComponent as Percent } from '../assets/percent.svg';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: 'flex',\r\n    flexGrow: 1,\r\n    flexDirection: 'column',\r\n    flexWrap: 'wrap',\r\n    alignContent: 'center',\r\n    alignItems: 'center',\r\n    // padding: '0 5em',\r\n    textAlign: 'center',\r\n    maxWidth: 444,\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n  },\r\n\r\n  gridItem: {\r\n    padding: '5px !important',\r\n  },\r\n  insideGridItem: {\r\n    boxShadow: '0px 2px 1px -1px rgb(0 0 0 / 20%), 0px 1px 1px 0px rgb(0 0 0 / 14%), 0px 1px 3px 0px rgb(0 0 0 / 12%)',\r\n    backgroundColor: '#2c384e',\r\n    margin: 0.1,\r\n    padding: '12px !important',\r\n    fontSize: 'large',\r\n  },\r\n  grid: {\r\n    padding: '1em',\r\n  },\r\n  modal: {\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n  },\r\n}));\r\n\r\nconst haversine = require('haversine')\r\n\r\nfunction WatchTracker() {\r\n  // Sounds\r\n  const [startPlaying, setStartPlaying] = useState(false);\r\n  const [stopPlaying, setStopPlaying] = useState(false);\r\n  const [passPlaying, setPassPlaying] = useState(false);\r\n  const [failPlaying, setFailPlaying] = useState(false);\r\n\r\n  let id, options;\r\n\r\n  // BCs\r\n  let dataRate = 500; //[ms]\r\n\r\n  let urbanMax = 33;\r\n  let ruralMax = 55;\r\n  let motorwayMax = 80;\r\n\r\n  let uMaxShare = 50; //[%]\r\n  let uMinShare = 5;\r\n  let rMaxShare = 40;\r\n  let rMinShare = 5;\r\n  let mMaxShare = 40;\r\n  let mMinShare = 5;\r\n\r\n  let urmMinDist = 0.2; //[km]\r\n\r\n  let maxAltChange = 100; //[m]\r\n\r\n  let maxTestTime = 15; //[min]\r\n  let minTestTime = 6; //[min]\r\n\r\n  const [minTimeReached, setMinTimeReached] = useState(false);\r\n  const [maxTimeReached, setMaxTimeReached] = useState(false);\r\n\r\n  let idleTime = 200; //[s]\r\n  const [idleIndex, setIdleIndex] = useState(0); //[s]\r\n\r\n  let coldStartEnd = 1; //[min]\r\n  const [isColdStart, setIsColdStart] = useState(true);\r\n\r\n  // Data\r\n  const [coordinates, setCoordinates] = useState([0, 0, 0, 0, 0, 0, 0]);\r\n\r\n  const [latitude, setLatitude] = useState(0);\r\n  const [longitude, setLongitude] = useState(0);\r\n  const [accuracy, setAccuracy] = useState(0);\r\n  const [gpsSpeed, setGpsSpeed] = useState(0);\r\n  const [altitude, setAltitude] = useState(0);\r\n  const [timestamp, setTimestamp] = useState(0);\r\n\r\n  const [startAlt, setStartAlt] = useState(0);\r\n  const [endAlt, setEndAlt] = useState(0);\r\n\r\n  const [distance, setDistance] = useState(0);\r\n  const [speed, setSpeed] = useState(0);\r\n\r\n  const [urbanDist, setUrbanDist] = useState(0);\r\n  const [ruralDist, setRuralDist] = useState(0);\r\n  const [motorwayDist, setMotorwayDist] = useState(0);\r\n\r\n  const [urbanShare, setUrbanShare] = useState(0);\r\n  const [ruralShare, setRuralShare] = useState(0);\r\n  const [motorwayShare, setMotorwayShare] = useState(0);\r\n\r\n  // Phases \r\n  // const [phase, setPhase] = useState(\"Pre-Test\");\r\n\r\n  const [testStatus, setTestStatus] = useState(0);\r\n\r\n  // 0 = PRE-TEST\r\n  // 1 = IN PROGRESS\r\n  // 2 = PASS\r\n  // 3 = FAIL \r\n  const errorStatus = [\r\n    \"MAX IDLING TIME!\",\r\n    \"MAX SPEED!\",\r\n    \"HIGH TIME!\",\r\n    \"LOW TIME!\",\r\n    \"U MIN DISTANCE!\",\r\n    \"R MIN DISTANCE!\",\r\n    \"M MIN DISTANCE!\",\r\n    \"U MIN SHARE!\",\r\n    \"R MIN SHARE!\",\r\n    \"M MIN SHARE!\",\r\n    \"U MAX SHARE!\",\r\n    \"R MAX SHARE!\",\r\n    \"M MAX SHARE!\",\r\n    \"MAX ALTITUDE!\",\r\n  ]\r\n\r\n  // Failure Switches\r\n  const [error4, setError4] = useState(false);\r\n  const [error5, setError5] = useState(false);\r\n  const [error6, setError6] = useState(false);\r\n  const [error7, setError7] = useState(false);\r\n  const [error8, setError8] = useState(false);\r\n  const [error9, setError9] = useState(false);\r\n  const [error10, setError10] = useState(false);\r\n  const [error11, setError11] = useState(false);\r\n  const [error12, setError12] = useState(false);\r\n  const [error13, setError13] = useState(false);\r\n  const [error14, setError14] = useState(false);\r\n  const [error15, setError15] = useState(false);\r\n  const [error16, setError16] = useState(false);\r\n  const [error17, setError17] = useState(false);\r\n\r\n  // Indexes and Switches\r\n  const [index, setIndex] = useState(0);\r\n  const [isOn, setIsOn] = useState(false);\r\n\r\n  function success(pos) {\r\n    setLatitude(pos.coords.latitude);\r\n    setLongitude(pos.coords.longitude);\r\n    setAccuracy(pos.coords.accuracy);\r\n    setGpsSpeed(pos.coords.speed);\r\n    setAltitude(pos.coords.altitude);\r\n    setTimestamp(pos.timestamp);\r\n  }\r\n\r\n  useInterval(() => {\r\n    setGpsSpeed((gpsSpeed === null) ? 0 : gpsSpeed); // set to 0 to mask null value\r\n    setCoordinates(\r\n      coordinates.concat(...[\r\n        latitude,\r\n        longitude,\r\n        altitude,\r\n        speed,\r\n        gpsSpeed,\r\n        timestamp,\r\n        accuracy\r\n      ])\r\n    )\r\n\r\n    console.log(JSON.stringify(coordinates));\r\n    localStorage.setItem(\"coordinates\", JSON.stringify(coordinates));\r\n\r\n    // log lats and longs (new):\r\n    // console.log(\"🔃 \" + latitude)\r\n    // console.log(\"🔁 \" + longitude)\r\n\r\n    let end = {\r\n      latitude: latitude,\r\n      longitude: longitude,\r\n    }\r\n\r\n    let oldLat = coordinates[index];\r\n    let oldLng = coordinates[index + 1];\r\n\r\n    setIndex(i => i + 7)\r\n\r\n    let start = {\r\n      latitude: oldLat,\r\n      longitude: oldLng,\r\n    }\r\n\r\n    // log lats and longs (old):\r\n    // console.log(\"🔃old \" + start.latitude)\r\n    // console.log(\"🔁old \" + start.longitude)\r\n\r\n    let havDis = haversine(start, end, { unit: 'km' })\r\n\r\n    if (start.latitude === 0 && start.longitude === 0) {\r\n      return\r\n    }\r\n\r\n    setDistance(prev => prev + havDis);\r\n\r\n    // log cumulative distance:\r\n    // console.log(\"💨 \" + distance);\r\n\r\n    let startTime = coordinates[index - 2];\r\n    let endTime = timestamp;\r\n    let deltaT = (endTime - startTime) / 3.6e+6; // ms -> hr;\r\n    deltaT = (deltaT === 0) ? 1 : deltaT; // set to 1 to mask NaN error\r\n\r\n    // console.log(\"⏳ \" + deltaT)\r\n\r\n    if (havDis > 0) { setSpeed(havDis / deltaT) };\r\n\r\n    if (speed >= 0 && speed < 1 && start.latitude === 0 && start.longitude === 0) {\r\n      setIdleIndex(prev => (prev + 2 * (dataRate / 1000)).toFixed(2)); // stopwatch count in [s]\r\n    } else if (speed >= 0 && speed < 1) {\r\n      setIdleIndex(prev => (prev + (dataRate / 1000)).toFixed(2));\r\n    } else if (speed > 1) {\r\n      setIdleIndex(0.0.toFixed(2));\r\n    }\r\n\r\n    // if (speed === 0 && isOn === false) {\r\n    //   setPhase(\"Pre-Test\")\r\n    // } else if (isColdStart === true) {\r\n    //   setPhase(\"Cold Start\")\r\n    // } else if (speed < urbanMax) {\r\n    //   setPhase(\"U\");\r\n    // } else if (speed < ruralMax) {\r\n    //   setPhase(\"R\");\r\n    // } else if (speed < motorwayMax) {\r\n    //   setPhase(\"M\")\r\n    // } else {\r\n    //   setPhase(\"EXTREME\")\r\n    // }\r\n\r\n    if (speed < urbanMax && speed > 0) {\r\n      setUrbanDist(prev => prev + havDis);\r\n    }\r\n    if (speed < ruralMax && speed > urbanMax) {\r\n      setRuralDist(prev => prev + havDis);\r\n    }\r\n    if (speed < motorwayMax && speed > ruralMax) {\r\n      setMotorwayDist(prev => prev + havDis)\r\n    }\r\n\r\n    setUrbanShare(distance === 0 ? 0 : (urbanDist / distance) * 100);\r\n    setRuralShare(distance === 0 ? 0 : (ruralDist / distance) * 100);\r\n    setMotorwayShare(distance === 0 ? 0 : (motorwayDist / distance) * 100);\r\n\r\n    // BC VERIFICATION\r\n    // Ordered for checking priority and code efficiency\r\n    setTestStatus(1); // set to in-progress the beginning\r\n    // HARD FAILURES (Break on 4, 5 and 6) \r\n    // Time\r\n    if (idleIndex >= idleTime) {\r\n      setError4(errorStatus[4 - 4]);\r\n      setIsOn(false);\r\n      stopWatch();\r\n    }\r\n\r\n    // Speed\r\n    if (speed > motorwayMax) {\r\n      setError5(errorStatus[5 - 4]);\r\n      setIsOn(false);\r\n      stopWatch();\r\n    }\r\n\r\n    // Time\r\n    if (maxTimeReached) {\r\n      setError6(errorStatus[6 - 4]);\r\n      setIsOn(false);\r\n      stopWatch();\r\n    }\r\n\r\n    // SOFT FAILURES\r\n    // Time \r\n    if (!minTimeReached) {\r\n      setError7(errorStatus[7 - 4]);\r\n    } else setError7(false);\r\n\r\n    // Distance [km]\r\n    if (urbanDist < urmMinDist) {\r\n      setError8(errorStatus[8 - 4]);\r\n    } else setError8(false);\r\n    if (ruralDist < urmMinDist) {\r\n      setError9(errorStatus[9 - 4]);\r\n    } else setError9(false);\r\n    if (motorwayDist < urmMinDist) {\r\n      setError10(errorStatus[10 - 4]);\r\n    } else setError10(false);\r\n\r\n    // Min Distance Share [%]\r\n    if (urbanShare < uMinShare) {\r\n      setError11(errorStatus[11 - 4]);\r\n    } else setError11(false);\r\n    if (ruralShare < rMinShare) {\r\n      setError12(errorStatus[12 - 4]);\r\n    } else setError12(false);\r\n    if (motorwayShare < mMinShare) {\r\n      setError13(errorStatus[13 - 4]);\r\n    } else setError13(false);\r\n\r\n    // Max Distance Share [%]\r\n    if (urbanShare > uMaxShare) {\r\n      setError14(errorStatus[14 - 4]);\r\n    } else setError14(false);\r\n    if (ruralShare > rMaxShare) {\r\n      setError15(errorStatus[15 - 4]);\r\n    } else setError15(false);\r\n    if (motorwayShare > mMaxShare) {\r\n      setError16(errorStatus[16 - 4]);\r\n    } else setError16(false);\r\n\r\n  }, isOn ? dataRate : null\r\n  )\r\n\r\n  function error(err) {\r\n    console.warn('ERROR(' + err.code + '): ' + err.message);\r\n  }\r\n\r\n  options = {\r\n    enableHighAccuracy: true,\r\n    maximumAge: 0\r\n  };\r\n\r\n  function startWatch() {\r\n    // console.log(\"Starting Watch.\")\r\n    if (\"geolocation\" in navigator && \"watchPosition\" in navigator.geolocation) {\r\n      id = navigator.geolocation.watchPosition(success, error, options);\r\n    } else {\r\n      console.log(\"Geolocation not available.\")\r\n    }\r\n  }\r\n\r\n  function stopWatch() {\r\n    // console.log(\"Stopping Watch.\");\r\n    navigator.geolocation.clearWatch(id);\r\n\r\n    setStartAlt(coordinates[2]);\r\n    setEndAlt(altitude);\r\n\r\n    if (Math.abs(startAlt - endAlt) > maxAltChange) {\r\n      setError17(errorStatus[17 - 4]);\r\n    }\r\n\r\n    if (error4 || error5 || error6 || error7 || error8 || error9 || error10 || error11 || error12 || error13 || error14 || error15 || error16 || error17) {\r\n      setTestStatus(3)\r\n      setFailPlaying(true);\r\n\r\n      return;\r\n    } else {\r\n      setTestStatus(2)\r\n      console.log(\"Test Passed.\")\r\n      setPassPlaying(true);\r\n    }\r\n  }\r\n\r\n  const classes = useStyles();\r\n  return (\r\n    <div className={classes.root}>\r\n      <React.Fragment>\r\n        <Sound\r\n          volume={75}\r\n          playStatus={startPlaying ? Sound.status.PLAYING : Sound.status.STOPPED}\r\n          url={startSound}\r\n          onFinishedPlaying={() => setStartPlaying(!startPlaying)}\r\n        />\r\n        <Sound\r\n          volume={75}\r\n          playStatus={stopPlaying ? Sound.status.PLAYING : Sound.status.STOPPED}\r\n          url={stopSound}\r\n          onFinishedPlaying={() => setStopPlaying(!stopPlaying)}\r\n        />\r\n        <Sound\r\n          volume={75}\r\n          playStatus={passPlaying ? Sound.status.PLAYING : Sound.status.STOPPED}\r\n          url={passSound}\r\n          onFinishedPlaying={() => setPassPlaying(!passPlaying)}\r\n        />\r\n        <Sound\r\n          volume={75}\r\n          playStatus={failPlaying ? Sound.status.PLAYING : Sound.status.STOPPED}\r\n          url={failSound}\r\n          onFinishedPlaying={() => setFailPlaying(!failPlaying)}\r\n        />\r\n        <Timer\r\n          initialTime={0}\r\n          startImmediately={false}\r\n          lastUnit=\"m\"\r\n          checkpoints={[\r\n            {\r\n              time: coldStartEnd * 60000,\r\n              callback: () => setIsColdStart(false),\r\n            },\r\n            {\r\n              time: maxTestTime * 60000,\r\n              callback: () => setMaxTimeReached(true),\r\n            },\r\n            {\r\n              time: minTestTime * 60000,\r\n              callback: () => setMinTimeReached(true),\r\n            }\r\n          ]}\r\n          onStart={() => {\r\n            // console.log('onStart hook');\r\n            startWatch();\r\n            setIsOn(true);\r\n            setTestStatus(1);\r\n            setStartPlaying(true);\r\n          }}\r\n          onStop={() => {\r\n            // console.log('onStop hook');\r\n            stopWatch();\r\n            setIsOn(false);\r\n            // setPhase(\"Post-Test\");\r\n            setStopPlaying(true);\r\n          }}\r\n          onReset={() => {\r\n            // console.log('onReset hook')\r\n            setTestStatus(0);\r\n            setFailPlaying(false);\r\n            navigator.geolocation.clearWatch(id);\r\n            setCoordinates([0, 0, 0, 0, 0, 0, 0]);\r\n            setIndex(0);\r\n            setIdleIndex(0);\r\n            setUrbanDist(0);\r\n            setRuralDist(0);\r\n            setMotorwayDist(0);\r\n            setUrbanShare(0);\r\n            setRuralShare(0);\r\n            setMotorwayShare(0);\r\n            setAccuracy(0);\r\n            setSpeed(0);\r\n            setGpsSpeed(0);\r\n            // setPhase(\"Pre-Test\");\r\n            setDistance(0);\r\n            // setErrorStatusDisplay([]);\r\n            // console.log(\"Reset.\")\r\n            // localStorage.setItem(\"coordinates\", JSON.stringify(coordinates));\r\n          }}\r\n        >\r\n          {({ start, resume, pause, stop, reset, timerState }) => (\r\n            <React.Fragment>\r\n              <Grid className={classes.grid} container spacing={3}>\r\n\r\n                <Grid style={{ width: '90%' }} className={classes.gridItem} item xs={6}>\r\n                  <StartStopButton startWatch={start} stopWatch={stop} resetWatch={reset} />\r\n                </Grid>\r\n\r\n                <Grid style={{ width: '90%' }} className={classes.gridItem} item xs={6}>\r\n                  <Button style={{ width: 'inherit' }} variant=\"contained\" onClick={reset} disabled={isOn}>\r\n                    Reset\r\n                  </Button>\r\n                </Grid>\r\n\r\n              </Grid>\r\n              <Grid className={classes.grid} container spacing={3}>\r\n\r\n                <Grid className={classes.gridItem} item xs={6}>\r\n                  <div className={classes.insideGridItem}>\r\n                    {/* Time\r\n                  <br /> */}\r\n                    <Timer.Minutes /> min&nbsp;\r\n                  <Timer.Seconds /> sec&nbsp;\r\n                  </div>\r\n                </Grid>\r\n\r\n                <Grid className={classes.gridItem} item xs={6}>\r\n                  <div className={classes.insideGridItem}>\r\n                    {/* Distance (km) */}\r\n                    {/* <br /> */}\r\n                    {distance === 0 ? 0 : Math.round(distance * 100) / 100} km\r\n                  </div>\r\n                </Grid>\r\n\r\n              </Grid>\r\n            </React.Fragment>\r\n          )}\r\n        </Timer>\r\n\r\n        <Grid className={classes.grid} container spacing={3}>\r\n\r\n          {/* <div>Speed  [km/h]/[mph] :</div> */}\r\n          {/* <Grid className={classes.gridItem} item xs={12}>\r\n            <div className={classes.insideGridItem}>Speed</div>\r\n          </Grid> */}\r\n\r\n          <Grid className={classes.gridItem} item xs={6}>\r\n            <div className={classes.insideGridItem}>{Math.round(speed * 10) / 10} km/h</div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={6}>\r\n            <div className={classes.insideGridItem}>{Math.round((speed / 1.609344498) * 10) / 10} mph</div>\r\n          </Grid>\r\n\r\n        </Grid>\r\n\r\n\r\n        {/* <Grid className={classes.grid} container spacing={3}> */}\r\n\r\n        {/* <div className=\"Data-Label\">, </div> */}\r\n\r\n        <div>Test Status (PASS/FAIL):</div>\r\n        <div className=\"Data-Label\">{testStatus === 3 && \"FAIL\"} {testStatus === 2 && \"PASS\"} {testStatus === 1 && \"IN PROGRESS\"} {testStatus === 0 && \"Pre-Test\"}</div>\r\n        {/* <div>Failure Reason (s): </div> */}\r\n        <div>Idling Time (s):</div>\r\n        <div className=\"Data-Label\">{idleIndex}</div>\r\n        {/* </Grid> */}\r\n\r\n        <br />\r\n        <div>Distance Shares</div>\r\n        <Grid className={classes.grid} container spacing={3}>\r\n\r\n          {/* <Grid className={classes.gridItem} item xs={12}>\r\n            <div>Distance Shares (U,R,M) [km]:</div>\r\n          </Grid> */}\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem}>_</div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem}>U</div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem}>R</div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem}>M</div>\r\n          </Grid>\r\n\r\n\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem}>\r\n              {/* <Ruler fill=\"white\" width='1rem' /> (km) */}\r\n             km\r\n            </div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem} style={{ fontSize: 'large' }}>{Math.round(urbanDist * 1000) / 1000}</div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem} style={{ fontSize: 'large' }}>{Math.round(ruralDist * 1000) / 1000}</div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem} style={{ fontSize: 'large' }}>{Math.round(motorwayDist * 1000) / 1000}</div>\r\n          </Grid>\r\n\r\n          {/* <Grid className={classes.gridItem} item xs={12}>\r\n            <div>Trip segment (U,R,M):</div>\r\n          </Grid>\r\n\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div>\r\n              {phase}\r\n            </div>\r\n          </Grid> */}\r\n\r\n          {/* <Grid className={classes.gridItem} item xs={12}>\r\n            <div >% Shares (U,R,M) [km]:</div>\r\n          </Grid> */}\r\n\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem}>\r\n              <Percent fill=\"#fafafa\" width='1rem' />\r\n            </div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem}>{Math.round(urbanShare)}</div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem} >{Math.round(ruralShare)}</div>\r\n          </Grid>\r\n          <Grid className={classes.gridItem} item xs={3}>\r\n            <div className={classes.insideGridItem}>{Math.round(motorwayShare)}</div>\r\n          </Grid>\r\n\r\n        </Grid>\r\n\r\n        <div className=\"Data-Small\">{isColdStart && isOn ? \"Cold Start\" : null}</div>\r\n        <br />\r\n        <br />\r\n\r\n        <MyModal />\r\n\r\n\r\n\r\n      </React.Fragment>\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default WatchTracker"]},"metadata":{},"sourceType":"module"}